---
title: UNIX
date: 2018-04-11 08:52:50
tags: OS
---
**OS 是指在整个系统中负责完成最基本功能和系统管理的那些部分。** 包括内核、设备驱动程序、启动引导程序、命令行 Shell 或其它用户界面、基本的文件管理工具和系统工具等。

**Unix 特点：**
* 明确的设计目的，并且仅有几百个系统调用；
* 所有的东西都被当作文件对待（并非所有，Sockets就是个典型的例外）。这种抽象使得对数据和对设备的操作是通过一套相同的系统调用接口来进行的：open()、read()、write()、lseek()、close()；
* 内核和相关的系统工具软件用C语言编写，具备强大的移植能力；
* 创建进程非常迅速——独特的fork()系统调用；
* 提供了一套简单但稳定的进程间通信元语。

**Linux**
Linux 是类 Unix 系统，但它不是Unix：采用Unix的设计目标并且实现了其API（由 Posix 等标准定义），并未像其它 Unix 变种那样使用 Unix 的源代码。使用 [GNU GPL v2](https://www.gnu.org/licenses/old-licenses/gpl-2.0.en.html) 作为限制条款。一般，Linux 这个词主要还是指 Linux 内核，而非 Linux 系统，后者在前者基础上集成了 C库、工具集甚至如 GNOME 等图形界面。
Linux 是模块化的、多线程的、内核本身可调度的 OS：
* 支持动态加载内核模块。尽管是但内核，但允许在需要的时候动态地卸载/加载部分内核代码；
* 支持对称多处理（SMP）机制；
* 可以抢占（preemptive），具有允许在内核运行的任务优先执行的能力；
* 不区分线程和一般进程，对于内核来说，所有的进程都一样。
* 提供具有设备类的面向对象的设备模型、热插拔事件，以及用户空间的设备文件系统（sysfs）；
* 忽略了一些被认为很拙劣的 Unix 特性，提现了自由这个词的精髓。

**内核**
通常由负责响应中断的**中断服务程序**、负责管理多个进程从而分享处理器时间的**调度程序**、负责管理进程地址空间的**内存管理程序**、负责网络与进程间通信等**系统服务程序**共同组成。
对于提供保护机制的现代 OS 来说，内核独立于普通应用程序，一般处于系统态，拥有受保护的内存空间和访问硬件设备的所有权限。这种系统态和被保护起来的内存空间，统称为**内核空间**。相对地，应用程序在**用户空间**执行。当内核运行的时候，系统以内核态进入内核空间执行；执行一个普通用户程序时，系统以用户态进入用户空间执行。应用程序通过**系统调用**与内核通信。
当一个应用程序执行一条系统调用，实际上是内核正在代其执行，此时，应用程序被称为通过系统调用**在内核空间运行**，内核被称为运行于**进程上下文中**。这种交互关系——应用程序通过系统调用陷入内核，是应用程序完成其工作的基本行为方式。
可以将每个处理器在任何指定时间点上的活动概括为下列三者之一（即使 CPU 空闲也不例外，此时运行一个空进程，处于进程上下文，运行于内核空间，即第二种）：
* 运行于用户空间，执行用户进程；
* 运行于内核空间，处于进程上下文，代表某个特定的进程执行；
* 运行于内核空间，处于中断上下文，于任何进程无关，处理某个特定的中断。

中断不在进程上下文中执行，它们在一个与所有进程都无关的、专门的中断上下文中运行：为了保证中断服务程序能够在第一时间相应和处理中断请求，然后快速地退出。
