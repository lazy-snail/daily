---
title: IO
date: 2018-04-10 23:20:06
categories: OS
tags: [OS]
---
[toc]
I/O 是在主存和外部设备（磁盘、终端、网络等）之间复制数据的过程。

# 文件
说到 I/O，不免地先简要介绍一下文件相关的重要概念。

## 文件类型
Unix 里一切皆文件。
* 普通文件：文本文件、二进制文件对内核而言都是普通文件。
* 目录文件：包含了其他文件的名字和指向与这些文件有关信息的指针。只有内核可以直接写目录文件。
* 块特殊文件：提供对块设备（磁盘、缓存等）带缓冲的访问，每次访问固定长度的数据。
* 字符特殊文件：提供对设备不带缓冲的访问，每次访问长度可变。系统中所有的设备要么是字符特殊文件，要么是块特殊文件。
* FIFO：可用于进程间通信，也称命名管道。
* 套接字：用于进程间的网络通信。
* 符号链接：指向另一个文件。

## 文件描述符
对于内核而言，所有打开的文件都通过文件描述符引用，它是一个非负整数。UNIX 系统 shell 把文件描述符 0 与 标准输入关联，1 与标准输出关联，2 与标准错误关联。尽管这和内核无关，但各种 shell 和应用都遵循此惯例。

# I/O 模型
Linux 提供 5 种 I/O 模型，前 4 个是同步 I/O 模型：
* 阻塞式 I/O
* 非阻塞式 I/O
* I/O 复用
* 信号驱动 I/O（SIGIO）
* 异步 I/O

# 函数
## select pselect poll epoll
本质上都是同步 I/O 多路复用，可以监听多个描述符的读写事件，一旦某个描述符就绪（一般是读/写事件发生），就能够将发生的事件通知给相应的应用程序去处理该事件。
对比：
https://cloud.tencent.com/developer/article/1005481
https://www.cnblogs.com/Anker/p/3265058.html