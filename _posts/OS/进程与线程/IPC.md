---
title: IPC
date: 2018-06-18 23:56:51
categories: OS
tags: OS
---
[toc]
# 进程间通信
如果 OS 中一个进程能影响其他进程或被其他进程所影响，那么它们是协作的。共享数据的进程之间互称为协作进程。协作进程需要一种进程之间通信的机制（IPC，InterProcess Communication），即进程间通信。需要 IPC 的理由有：信息共享、提高运算速度、模块化等。**进程同步与互斥可以看作低级通信**。
需要考虑的问题：
* 一个进程如何把信息传递给另一个；
* 如何确保两个/多个进程在关键活动中不会出现交叉；
* 信息传递的顺序问题。

两种基本模式：
* 共享内存：建立一块供协作进程共享的内存区域，进程通过向此共享区域读/写数据来交换信息；
* 消息传递：通过在协作进程间交换信息来实现通信。
{% asset_img 两种IPC模式.PNG 两种IPC模式 %}
消息传递对于交换较少数据量的数据很有用，因为不需要避免冲突，实现也比共享内存容易，通常需要系统调用来实现，因此需要更多的内核介入的时间消耗。共享内存允许以最快的速度（可以达到内存的速度）进行方便的通信，仅在建立共享内存区域时需要系统调用，一旦建立了共享内存，所有的访问都被处理为常规的内存访问，不需要来自内核的帮助，因而比消息传递快。

# 共享内存(shared memory)
共享内存就是映射一段能被其他进程所访问的内存，这段共享内存由一个进程创建，但多个进程都可以访问，这些进程通过在共享区域内读写来交换信息。共享内存是最快的 IPC 方式，它是针对其他进程间通信方式运行效率低而专门设计的。它往往与其他通信机制（如信号量）配合使用，来实现进程间的同步和通信。

# 消息传递
消息传递提供一种机制，使得进程不必通过共享地址空间来实现通信和同步。消息传递工具至少提供两种操作：发送消息和接收消息。
一般有管道、信号量、信号、消息队列、套接字等。

## 管道
最基本的 IPC 机制。管道只能在本机上完成数据传递。特征：
* 本质上是一个伪文件（内核缓冲区）；
* 由两个文件描述符引用：一个标识读端，一个标识写端；

### 匿名管道（）
在本地机器上可以使用匿名管道来实现父进程和子进程之间的通信。

### 命名管道
能够在不相关（不具有血缘关系）的进程之间传递消息。命名管道也被称为 FIFO 文件，它是一种特殊类型的文件，它在文件系统中以文件名的形式存在，但是它的行为却和之前所讲的没有名字的管道（匿名管道）类似。

## 信号量( semophore ) ：
信号量是一个计数器，可以用来控制多个进程对共享资源的访问。它常作为一种锁机制，防止某进程正在访问共享资源时，其他进程也访问该资源。因此，主要作为进程间以及同一进程内不同线程之间的同步和通信的手段。

## 信号 ( sinal ) ： 
信号是一种比较复杂的通信方式，用于通知接收进程某个事件已经发生。

## 消息队列(message queue) ：
消息队列是由消息的链表，存放在内核中并由消息队列标识符标识。消息队列克服了信号传递信息少、管道只能承载无格式字节流以及缓冲区大小受限等缺点。

## 套接字( socket ) ： 
网络间进程通信，与以上通信机制不同的是，它可用于不同机器间的进程通信。


https://blog.csdn.net/gatieme/article/details/50908749