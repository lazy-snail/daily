---
title: 构造 析构
date: 2018-05-22 16:20:41
categories: cpp
tags: cpp
---
# 构造函数
## 默认生成
默认情况下，编译器会为一个类自动生成：
* 一个默认构造函数：X();
* 一个拷贝构造函数：X(const X&);
* 一个拷贝赋值运算符：X& operator=(const X&);
* 一个移动构造函数：X(X&&);
* 一个移动赋值运算符：X& operator=(X&&);
* 一个析构函数：~X();

如果用户定义了其中一个/多个构造函数，则：
* 如果声明了任意构造函数，则不再生成默认构造函数；
* 如果声明了拷贝操作、移动操作或析构函数，则不再生成相应的拷贝操作、移动操作或析构函数。
可以使用显式声明默认操作（=default）。

## 成员初始化顺序
构造函数中的参数列表顺序并不代表类中成员变量的初始化顺序，成员的初始化顺序取决于成员在类中声明/定义的顺序。

## 委托构造函数
C++11 扩展了构造函数初始值的功能，可以定义使用委托构造函数（delegating constructor）：使用类的其他构造函数执行自身初始化过程的构造函数：把自身的一部分/全部初始化工作委托给其他构造函数来执行。










# 析构函数
如果 class 没有定义析构函数，那么只有在 **class 的成员对象或父类拥有析构函数** 的情况下，编译器才会自动合成一个析构函数。否则，被视为不需要析构函数从而不被合成。