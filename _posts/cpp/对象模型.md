---
title: 对象模型
date: 2018-05-22 16:20:41
categories: cpp
tags: cpp
---
[toc]
C++ 中有两种 class data members（数据成员）
* static 
* nonstatic

三种 class member functions（成员函数）：
* static
* nonstatic
* virtual

# 对象模型
{% asset_img cpp对象模型.PNG "C++ 对象模型" %}
## 成员位置
该模型中，
* nonstatic data members 被配置在每个 class object 内部，static data members 被放在所有 class object 之外；
* nonstatic/static function members 被放在所有 class object 之外，virtual function members（如果有）就在  class object 内部配置一个指向 virtual function members 构成的 virtual table 的指针。

这里的 virtual table（虚函数表）对象模型中的概念如下：
## 虚函数表
也就是 virtual table（vtbl）。如果一个 class 定义中声明有虚函数，则 class 会产生一个相应的表，即虚函数表，用来存放所有的指针，每个指针指向一个 class 中的一个虚函数。没有声明虚函数的类，不会产生这张表，也就没有下一段内容的描述。
即，虚函数表是 class 级别的概念，而针对每个类对象，都会添加一个指针（vptr），这个指针指向该类的虚函数表。vptr 的设置（setting）和重置（resetting）都由类对象的 constructor、destructor 和 copy assignment 运算符自动完成。